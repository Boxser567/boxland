{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nvar __jsx = React.createElement;\nimport React, { useState } from \"react\";\nimport Link from \"next/link\";\nimport { Grid, Button, Box, TextField, InputAdornment, Icon } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport SearchIcon from \"@material-ui/icons/Search\";\nimport KeyboardArrowLeftIcon from \"@material-ui/icons/KeyboardArrowLeft\";\nimport KeyboardArrowRightIcon from \"@material-ui/icons/KeyboardArrowRight\";\nimport Moment from \"react-moment\";\nimport jsCookie from \"js-cookie\";\nimport fetch from \"../public/js/nextFetch\";\nimport Main from \"../layouts/main\";\nimport Empty from \"../components/empty\"; // import \"../public/css/index.less\";\n\nexport default function Home(props) {\n  var _useState = useState(props.lists),\n      postData = _useState[0],\n      setPostData = _useState[1];\n\n  var user = JSON.parse(jsCookie.get(\"userlogin\") || null);\n\n  var handleTag =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee(str) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return fetch(\"post?type=\".concat(str));\n\n            case 2:\n              res = _context.sent;\n              setPostData(res.data);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleTag(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var searchData =\n  /*#__PURE__*/\n  function () {\n    var _ref2 = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee2() {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function searchData() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(Main, null, __jsx(Grid, {\n    container: true,\n    spacing: 1\n  }, __jsx(Box, {\n    style: {\n      width: \"100%\"\n    },\n    display: \"flex\",\n    justifyContent: \"space-between\",\n    alignItems: \"baseline\",\n    marginTop: \"40px\"\n  }, __jsx(Box, {\n    m: 1\n  }, __jsx(Button, {\n    onClick: function onClick() {\n      return handleTag(\"0\");\n    }\n  }, \"\\u5168\\u90E8\"), __jsx(Button, {\n    onClick: function onClick() {\n      return handleTag(\"1\");\n    }\n  }, \"\\u77E5\\u8BC6\\u5206\\u4EAB\"), __jsx(Button, {\n    onClick: function onClick() {\n      return handleTag(\"2\");\n    }\n  }, \"\\u611F\\u609F\"), __jsx(Button, {\n    onClick: function onClick() {\n      return handleTag(\"3\");\n    }\n  }, \"\\u5176\\u5B83\"), user && __jsx(Button, {\n    onClick: function onClick() {\n      return handleTag(\"99\");\n    }\n  }, \"\\u8349\\u7A3F\")), __jsx(TextField, {\n    placeholder: \"\\u9AD8\\u7EA7\\u641C\\u7D22\",\n    id: \"standard-bare\",\n    margin: \"normal\",\n    InputProps: {\n      endAdornment: __jsx(InputAdornment, {\n        position: \"end\"\n      }, __jsx(SearchIcon, {\n        onClick: function onClick() {\n          return searchData;\n        },\n        color: \"disabled\",\n        cursor: \"pointer\"\n      }))\n    }\n  })), postData.length ? postData.map(function (item) {\n    return __jsx(Grid, {\n      item: true,\n      xs: 12,\n      key: item.id\n    }, __jsx(\"div\", {\n      className: \"markdown-body article ar-item\"\n    }, __jsx(\"div\", {\n      className: \"flex-box title\"\n    }, __jsx(\"div\", null, __jsx(Moment, {\n      format: \"YYYY-MM-DD\"\n    }, item.createTime), __jsx(\"span\", {\n      className: \"tag\"\n    }, item.tagName)), __jsx(\"div\", null, user && __jsx(Button, {\n      size: \"small\",\n      href: \"/admin/editor?entry=article&postId=\" + item.id\n    }, \"\\u7F16\\u8F91\"), __jsx(Button, {\n      size: \"small\",\n      href: \"/post?id=\" + item.id\n    }, \"\\u67E5\\u770B\\u8BE6\\u60C5\"))), __jsx(\"div\", {\n      dangerouslySetInnerHTML: {\n        __html: item.content\n      }\n    })));\n  }) : __jsx(Empty, null)), // 暂不公开\n  false && __jsx(Box, {\n    display: \"flex\",\n    marginBottom: \"60px\",\n    justifyContent: \"center\",\n    p: 1\n  }, __jsx(Button, {\n    variant: \"contained\",\n    startIcon: __jsx(KeyboardArrowLeftIcon, null),\n    style: {\n      marginRight: \"15px\"\n    }\n  }), __jsx(Button, {\n    variant: \"contained\",\n    endIcon: __jsx(KeyboardArrowRightIcon, null)\n  })));\n}\n\nHome.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref4 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(_ref3) {\n    var query, res;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            query = _ref3.query;\n            _context3.next = 3;\n            return fetch(\"post\");\n\n          case 3:\n            res = _context3.sent;\n            return _context3.abrupt(\"return\", {\n              lists: res.data\n            });\n\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x2) {\n    return _ref4.apply(this, arguments);\n  };\n}();","map":null,"metadata":{},"sourceType":"module"}